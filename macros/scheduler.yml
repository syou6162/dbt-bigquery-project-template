---
version: 2

macros:
  - name: execution_date
    description: |
      ## Overview
      It enables us to get a `datetime` object, not string.
      The value is set by the environment variable `EXECUTION_DATE`.
      It is inspired by Apache Airflow's `{% raw %}{{ execution_date }}{% endraw %}`.
    docs:
      show: true

  - name: ds
    description: |
      ## Overview
      It enables us to get a date string which derives from `EXECUTION_DATE`.
      The output should follow `%Y-%m-%d`.
      It is inspired by Apache Airflow's `{% raw %}{{ ds }}{% endraw %}`.

      ## Usage
      {% raw %}`{{ ds() }}`{% endraw %}}
    docs:
      show: true

  - name: ds_nodash
    description: |
      ## Overview
      It enables us to get a date string which derives from `EXECUTION_DATE`.
      The output should follow `%Y%m%d`.
      It is inspired by Apache Airflow's `{% raw %}{{ ds_noddash }}{% endraw %}`.

      ## Usage
      {% raw %}`{{ ds_nodash() }}`{% endraw %}}
    docs:
      show: true

  - name: ds_add
    description: |
      ## Overview
      It enables us to add n days and get a date string which derives from `EXECUTION_DATE`.
      The output should follow `%Y-%m-%d`.
      It is inspired by Apache Airflow's `{% raw %}{{ ds_add }}{% endraw %}`.

      ## Usage
      {% raw %}`{{ ds_add(7) }}`{% endraw %}}
    docs:
      show: true

  - name: ts
    description: |
      ## Overview
      It enables us to get a date and time string which derives from `EXECUTION_DATE`.
      The output should follow `%Y-%m-%dT%H:%M:%S+00:00`.
      It is inspired by Apache Airflow's `{% raw %}{{ ts }}{% endraw %}`.

      ## Usage
      {% raw %}`{{ ts() }}`{% endraw %}}
    docs:
      show: true

  - name: ts_nodash
    description: |
      ## Overview
      It enables us to get a date and time string which derives from `EXECUTION_DATE`.
      The output should follow `%Y%m%dT%H%M%S`.
      It is inspired by Apache Airflow's `{% raw %}{{ ts_nodash }}{% endraw %}`.

      ## Usage
      {% raw %}`{{ ts_nodash() }}`{% endraw %}}
    docs:
      show: true
